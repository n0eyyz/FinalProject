셀레니움 작업 중 오류 처리 과정
[초기 작업] 기본 Selenium 코드로 본문 추출
- 인스타그램 게시물 URL을 직접 입력해서 본문 크롤링 시도
- article, h1, span, div 등에서 텍스트 추출 시도
[문제 1] 중복 추출/불필요한 텍스트 반복
- 제목, 본문, 시간, 댓글, 로그인 권유 팝업창 등이 여러 번 반복되어 추출됨
- 중복 제거, 불필요한 텍스트 필터링 추가하여 중복 현상 개선 시도
[문제 2] 본문 추출 실패/본문이 없는 현상
- 특정 게시물(또는 URL 파라미터가 붙은 주소)에서 본문 추출이 불안정
- 간헐적으로 작동하며 "본문을 찾을 수 없습니다" 출력되고 원인을 찾지 못함
[문제 3] 로그인 유도 팝업, 더보기 버튼 등 동적 요소
- 팝업 등장 시 본문 추출 실패 발견
- 팝업 닫기 로직 코드 추가
[문제 4] 파라미터가 붙은 URL에서 본문 추출 실패
- 상단 주소창 복사한 URL(파라미터 X)는 성공하고 인스타 내부 '링크 복사' URL(파라미터 O)는 실패함
분석 결과 : 파라미터가 붙으면 인스타그램 서버가 본몬 DOM을 다르게 내리거나 렌더링을 늦춤
해결 방법 : 파라미터 자동 제거 코드 추가
[문제 5] 크롤링 단계별 로깅, 디버깅 강화
- print를 각 단계에 프롬포트 형태로 상세하게 추가하여 오류가 생기는 처리 단계를 확인할 수 있게 함
- driver.page_source를 저장하여 구조를 직접 확인함
[문제 6] 본문 태그(XPath) 변화 및 fallback
- h1 등에서 본문 추출 실패 시, article 내부 span/div/p 등 다양한 XPath fallback 시도
- 실패시 meta[og:description], meta[description] 등도 최후의 수단으로 추가
[결과] 현재 동작 상태
- 정상 URL 입력(파라미터 X) + 팝업, 더보기, 본문 XPath 순차적으로 탐색
- 댓글, 시간 등이 제외된 본문만 추출에 성공
- log 예시
[STEP 1] URL 접근: ...
[STEP 2] 팝업 닫기 없음/실패 ...
[STEP 3] '더 보기' 버튼 없음/실패 ...
[STEP 4] main 찾음
[STEP 5] h1에서 본문 추출: ✈️요즘 일본 항공권 얼마인지 알아?🤩
[개선] front에서 직접 URL을 받아올 수 있게 